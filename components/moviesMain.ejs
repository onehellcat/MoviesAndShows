<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div class="bg-gray-800 shadow rounded-lg p-6 min-h-full mr-3 ml-2">
      <h2 class="text-2xl font-semibold text-gray-100">Dashboard</h2>
      <p class="mt-4 text-gray-300">Welcome to the admin dashboard!</p>
      <!-- Flex container for form and table -->
      <div class="flex flex-col">
        <!-- Input Row -->
        <form class="mt-3" method="POST">
          <div class="grid grid-cols-4 gap-3">
            <!-- Name input -->
            <div class="col-span-1">
              <input
                type="text"
                name="name"
                placeholder="Name"
                class="form-input w-full px-4 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                required />
            </div>
            <!-- Genre input -->
            <div class="col-span-1 relative">
              <input
                type="text"
                name="genres"
                id="genreInput"
                placeholder="Genres..."
                class="form-input w-full px-4 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                autocomplete="off"
                readonly
                required />
              <!-- Genre cards popover -->
              <div
                id="genrePopover"
                class="absolute left-0 mt-1 w-full bg-gray-800 shadow-lg rounded-md hidden z-10">
                <div class="p-2">
                  <div class="grid grid-cols-3 gap-2">
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Action">
                      Action
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Adventure">
                      Adventure
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Animation">
                      Animation
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Comedy">
                      Comedy
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Crime">
                      Crime
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Documentary">
                      Documentary
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Drama">
                      Drama
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Family">
                      Family
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Fantasy">
                      Fantasy
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="History">
                      History
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Horror">
                      Horror
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Music">
                      Music
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Mystery">
                      Mystery
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Romance">
                      Romance
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Science Fiction">
                      Sci-Fi
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Thriller">
                      Thriller
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="War">
                      War
                    </div>
                    <div
                      class="genre-card p-2 text-center text-gray-100 bg-gray-700 rounded-md cursor-pointer"
                      data-genre="Western">
                      Western
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- IMDb Rating input -->
            <div class="col-span-1">
              <input
                type="number"
                step="0.1"
                min="0.1"
                max="10"
                name="imdb"
                placeholder="IMDb Rating"
                class="form-input w-full px-4 py-2 bg-gray-900 text-gray-100 border border-gray-600 rounded-md placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                required />
            </div>
            <!-- Add button -->
            <div class="col-span-1">
              <button
                type="submit"
                method="POST"
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full">
                Add
              </button>
            </div>
          </div>
        </form>

        <!-- Table Container -->
        <div class="table-container mt-6">
          <div class="table-responsive">
            <table class="table w-full">
              <thead class="text-xs text-gray-400 uppercase">
                <tr>
                  <th class="px-4 py-2">Name</th>
                  <th class="px-4 py-2">Genre</th>
                  <th class="px-4 py-2">IMDb Rating</th>
                  <th class="px-4 py-2">ID</th>
                </tr>
              </thead>
              <tbody class="text-sm text-gray-300">
                <!-- EJS Rendering -->
                <% data.forEach(function(movie) { %>
                <tr class="bg-gray-900 text-gray-100 hover:bg-gray-700">
                  <td class="px-4 py-2 whitespace-nowrap text-center">
                    <%= movie.name %>
                  </td>
                  <td class="px-4 py-2 whitespace-nowrap text-center">
                    <%= movie.genre %>
                  </td>
                  <td class="px-4 py-2 whitespace-nowrap text-center">
                    <span
                      class="inline-block px-2 py-1 rounded text-sm font-semibold <% if (movie.IMDb >= 7) { %> bg-green-500 text-white <% } else if (movie.IMDb >= 6) { %> bg-yellow-500 text-white <% } else if (movie.IMDb >= 4) { %> bg-yellow-700 text-white <% } else { %> bg-red-500 text-white <% } %>">
                      <%= movie.IMDb %>
                    </span>
                  </td>
                  <td class="px-4 py-2 whitespace-nowrap text-center">
                    <%= movie.id %>
                  </td>
                </tr>
                <% }) %>
                <!-- End of EJS Rendering -->
              </tbody>
            </table>
          </div>
        </div>
        <!-- End of Table Container -->
      </div>
      <!-- End of Flex container -->
    </div>
  </body>
</html>
